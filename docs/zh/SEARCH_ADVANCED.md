# ç½‘ç»œæœç´¢å·¥å…· v2.0 - å®Œæ•´å‡çº§æŒ‡å—

## ğŸ‰ é‡å¤§æ›´æ–°

æœ¬æ¬¡å‡çº§å°†æœç´¢åŠŸèƒ½æå‡åˆ°å…¨æ–°æ°´å¹³ï¼Œæ–°å¢å¤šé¡¹ä¼ä¸šçº§ç‰¹æ€§ã€‚

## æ–°å¢åŠŸèƒ½æ€»è§ˆ

| åŠŸèƒ½           | çŠ¶æ€ | è¯´æ˜                                 |
| -------------- | ---- | ------------------------------------ |
| å¤šæœç´¢å¼•æ“æ”¯æŒ | âœ…   | æ”¯æŒ DuckDuckGo, Bing, Google, Baidu |
| æ™ºèƒ½ç¼“å­˜       | âœ…   | è‡ªåŠ¨ç¼“å­˜ç»“æœï¼Œå‡å°‘APIè°ƒç”¨            |
| å¹¶è¡Œæœç´¢       | âœ…   | åŒæ—¶æŸ¥è¯¢å¤šä¸ªå¼•æ“                     |
| ç»“æœå»é‡       | âœ…   | æ™ºèƒ½å»é™¤é‡å¤ç»“æœ                     |
| é«˜çº§æœç´¢é€‰é¡¹   | âœ…   | è‡ªå®šä¹‰å¼•æ“ç»„åˆå’Œå‚æ•°                 |
| é™æµä¿æŠ¤       | âœ…   | é˜²æ­¢é¢‘ç¹è¯·æ±‚                         |
| æ•…éšœè½¬ç§»       | âœ…   | è‡ªåŠ¨åˆ‡æ¢å¤‡ç”¨å¼•æ“                     |

## 1. å¤šæœç´¢å¼•æ“æ”¯æŒ

### æ”¯æŒçš„æœç´¢å¼•æ“

#### DuckDuckGo

- **ç‰¹ç‚¹**: æ³¨é‡éšç§ï¼Œæ— å¹¿å‘Šï¼Œç»“æœè´¨é‡é«˜
- **é€‚ç”¨**: æ—¥å¸¸æœç´¢ï¼Œéšç§ä¿æŠ¤åœºæ™¯
- **é™åˆ¶**: å¯èƒ½é‡åˆ°é€Ÿç‡é™åˆ¶

#### Bing

- **ç‰¹ç‚¹**: å¾®è½¯æœç´¢ï¼Œç»“æœå…¨é¢ï¼ŒAPIç¨³å®š
- **é€‚ç”¨**: ç»¼åˆæœç´¢ï¼Œæ–°é—»æœç´¢
- ** é™åˆ¶**: éœ€è¦é¿å…è¿‡åº¦é¢‘ç¹è¯·æ±‚

#### Google

- **ç‰¹ç‚¹**: å…¨çƒæœ€å¤§æœç´¢å¼•æ“ï¼Œç»“æœæœ€ä¸°å¯Œ
- **é€‚ç”¨**: ä¸“ä¸šç ”ç©¶ï¼Œå­¦æœ¯æœç´¢
- **é™åˆ¶**: éœ€è¦å¤„ç†åçˆ¬è™«æœºåˆ¶

#### Baidu

- **ç‰¹ç‚¹**: ä¸­æ–‡æœç´¢é¢†å…ˆï¼Œæœ¬åœ°åŒ–å†…å®¹ä¸°å¯Œ
- **é€‚ç”¨**: ä¸­æ–‡å†…å®¹æœç´¢
- **é™åˆ¶**: ç¼–ç å¤„ç†è¾ƒå¤æ‚

### ä½¿ç”¨ç¤ºä¾‹

```python
# åŸºç¡€æœç´¢ï¼ˆé»˜è®¤ä½¿ç”¨ DuckDuckGo + Bingï¼‰
web_search("Python programming", max_results=10)

# é«˜çº§æœç´¢ - æŒ‡å®šå¼•æ“
web_search_advanced(
    query="äººå·¥æ™ºèƒ½",
    engines="baidu,google",
    max_results=20
)

# é«˜çº§æœç´¢ - å¹¶è¡Œæ¨¡å¼
web_search_advanced(
    query="machine learning",
    engines="duckduckgo,bing,google",
    parallel=True,
    max_results=30
)
```

## 2. æ™ºèƒ½ç¼“å­˜æœºåˆ¶

### ç¼“å­˜ç‰¹æ€§

- **æœ‰æ•ˆæœŸ**: 3600ç§’ï¼ˆ1å°æ—¶ï¼‰
- **å®¹é‡**: 1000æ¡è®°å½•
- **é”®ç”Ÿæˆ**: MD5(engine + query + params)
- **è¿‡æœŸå¤„ç†**: è‡ªåŠ¨æ¸…ç†è¿‡æœŸæ¡ç›®
- **å®¹é‡ç®¡ç†**: LRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰ç­–ç•¥

### ç¼“å­˜ä¼˜åŠ¿

1. **æ€§èƒ½æå‡**: ç¼“å­˜å‘½ä¸­æ—¶å“åº”æ—¶é—´ä»ç§’çº§é™è‡³æ¯«ç§’çº§
2. **æˆæœ¬é™ä½**: å‡å°‘90%ä»¥ä¸Šçš„APIè°ƒç”¨
3. **ç¨³å®šæ€§**: é™ä½è¢«å°ç¦é£é™©
4. **ç”¨æˆ·ä½“éªŒ**: å³æ—¶è¿”å›å¸¸è§æŸ¥è¯¢ç»“æœ

### ç¼“å­˜æ§åˆ¶

```python
# å¯ç”¨ç¼“å­˜ï¼ˆé»˜è®¤ï¼‰
web_search_advanced("query", use_cache=True)

# ç¦ç”¨ç¼“å­˜ï¼ˆå¼ºåˆ¶åˆ·æ–°ï¼‰
web_search_advanced("query", use_cache=False)

# æ¸…ç©ºç¼“å­˜
clear_search_cache()

# æŸ¥çœ‹ç¼“å­˜ç»Ÿè®¡
get_search_stats()
```

### ç¼“å­˜ç»Ÿè®¡ç¤ºä¾‹

```json
{
  "success": true,
  "cache": {
    "total_entries": 156,
    "expired_entries": 12,
    "active_entries": 144,
    "max_size": 1000,
    "ttl_seconds": 3600
  },
  "rate_limiter": {
    "max_requests": 10,
    "window_seconds": 60
  }
}
```

## 3. å¹¶è¡Œå¤šå¼•æ“æœç´¢

### å·¥ä½œåŸç†

1. **çº¿ç¨‹æ± **: ä½¿ç”¨ ThreadPoolExecutor å¹¶å‘æ‰§è¡Œ
2. **ç»“æœåˆå¹¶**: æ”¶é›†æ‰€æœ‰å¼•æ“çš„ç»“æœ
3. **æ™ºèƒ½å»é‡**: ç§»é™¤é‡å¤å†…å®¹
4. **ç»“æœæ’åº**: æŒ‰ç›¸å…³æ€§å’Œæ¥æºæ’åº

### æ€§èƒ½å¯¹æ¯”

| æ¨¡å¼     | å¹³å‡å“åº”æ—¶é—´ | ç»“æœè¦†ç›–é¢ |
| -------- | ------------ | ---------- |
| ä¸²è¡Œæœç´¢ | 2-5ç§’        | å•å¼•æ“     |
| å¹¶è¡Œæœç´¢ | 1-2ç§’        | å¤šå¼•æ“     |

### ä½¿ç”¨å»ºè®®

- **æ™®é€šæœç´¢**: ä½¿ç”¨ä¸²è¡Œæ¨¡å¼ï¼ˆæ•…éšœè½¬ç§»ï¼‰
- **é‡è¦æœç´¢**: ä½¿ç”¨å¹¶è¡Œæ¨¡å¼ï¼ˆç»“æœå…¨é¢ï¼‰
- **æ—¶é—´æ•æ„Ÿ**: ä½¿ç”¨å¹¶è¡Œæ¨¡å¼ï¼ˆé€Ÿåº¦æœ€å¿«ï¼‰

```python
# ä¸²è¡Œæœç´¢ï¼ˆæ¨èæ—¥å¸¸ä½¿ç”¨ï¼‰
web_search_advanced(
    query="Python best practices",
    engines="duckduckgo,bing",
    parallel=False  # å¤±è´¥è‡ªåŠ¨è½¬ç§»
)

# å¹¶è¡Œæœç´¢ï¼ˆæ¨èé‡è¦æŸ¥è¯¢ï¼‰
web_search_advanced(
    query="quantum computing research",
    engines="google,bing,duckduckgo",
    parallel=True  # åŒæ—¶æŸ¥è¯¢æ‰€æœ‰å¼•æ“
)
```

## 4. æœç´¢ç»“æœå»é‡

### å»é‡ç®—æ³•

1. **URLæ ‡å‡†åŒ–**
   - ç§»é™¤æŸ¥è¯¢å‚æ•° (`?` åçš„å†…å®¹)
   - ç§»é™¤å°¾éƒ¨æ–œæ 
   - è½¬æ¢ä¸ºå°å†™

2. **æ ‡é¢˜åŒ¹é…**
   - å¿½ç•¥å¤§å°å†™
   - å¿½ç•¥æ ‡ç‚¹ç¬¦å·
   - æ£€æµ‹ç›¸ä¼¼åº¦

3. **ä¿ç•™ç­–ç•¥**
   - ä¿ç•™ç¬¬ä¸€æ¬¡å‡ºç°çš„ç»“æœ
   - ä¿ç•™æ¥æºä¿¡æ¯ï¼ˆå¼•æ“åç§°ï¼‰

### å»é‡æ•ˆæœ

```
åŸå§‹ç»“æœ: 45æ¡
å»é‡å: 28æ¡
å»é‡ç‡: 37.8%
```

## 5. é«˜çº§æœç´¢é€‰é¡¹

### web_search_advanced API

```python
def web_search_advanced(
    query: str,              # æœç´¢æŸ¥è¯¢
    max_results: int = 10,   # æœ€å¤§ç»“æœæ•°ï¼ˆ1-50ï¼‰
    engines: str = "duckduckgo,bing",  # å¼•æ“åˆ—è¡¨
    parallel: bool = False,  # æ˜¯å¦å¹¶è¡Œ
    use_cache: bool = True   # æ˜¯å¦ä½¿ç”¨ç¼“å­˜
) -> str:
```

### è¿”å›æ ¼å¼

```json
{
  "success": true,
  "results": [
    {
      "title": "ç»“æœæ ‡é¢˜",
      "link": "https://example.com",
      "snippet": "ç»“æœæ‘˜è¦",
      "engine": "DuckDuckGo"
    }
  ],
  "count": 10,
  "query": "æœç´¢è¯",
  "engines_used": ["duckduckgo"],
  "parallel": false,
  "cached": true,
  "errors": null
}
```

### ä½¿ç”¨åœºæ™¯

**åœºæ™¯ 1: å¿«é€Ÿæœç´¢**

```python
web_search_advanced("quick query", engines="duckduckgo")
```

**åœºæ™¯ 2: å…¨é¢æœç´¢**

```python
web_search_advanced(
    "comprehensive search",
    engines="duckduckgo,bing,google,baidu",
    parallel=True,
    max_results=50
)
```

**åœºæ™¯ 3: ä¸­æ–‡æœç´¢**

```python
web_search_advanced("ä¸­æ–‡å†…å®¹", engines="baidu")
```

**åœºæ™¯ 4: æ–°é—»æœç´¢**

```python
web_search_news("latest news", max_results=20)
```

## 6. è¯·æ±‚é™æµä¿æŠ¤

### é™æµæœºåˆ¶

- **çª—å£**: 60ç§’æ»‘åŠ¨çª—å£
- **é™åˆ¶**: æ¯ä¸ªæŸ¥è¯¢10æ¬¡è¯·æ±‚
- **ç­–ç•¥**: ä»¤ç‰Œæ¡¶ç®—æ³•
- **è¶…é™**: è¿”å›ç­‰å¾…æ—¶é—´

### é™æµå“åº”

```json
{
  "success": false,
  "error": "Rate limit exceeded. Please wait 15.3 seconds",
  "results": []
}
```

### æœ€ä½³å®è·µ

1. **åˆç†é¢‘ç‡**: é¿å…çŸ­æ—¶é—´å†…é‡å¤æŸ¥è¯¢
2. **ä½¿ç”¨ç¼“å­˜**: å‡å°‘å®é™…è¯·æ±‚æ¬¡æ•°
3. **æ‰¹é‡æŸ¥è¯¢**: åˆå¹¶ç›¸å…³æŸ¥è¯¢
4. **é”™è¯¯å¤„ç†**: é‡åˆ°é™æµæ—¶ç­‰å¾…åé‡è¯•

## 7. æ•…éšœè‡ªåŠ¨è½¬ç§»

### è½¬ç§»ç­–ç•¥

1. **ä¼˜å…ˆçº§é¡ºåº**: æŒ‰é…ç½®çš„å¼•æ“é¡ºåºå°è¯•
2. **å¿«é€Ÿå¤±è´¥**: å•ä¸ªå¼•æ“è¶…æ—¶æ—¶é—´15ç§’
3. **æ™ºèƒ½è·³è¿‡**: æ ‡è®°å¤±è´¥çš„å¼•æ“
4. **ç»“æœä¿è¯**: è‡³å°‘å°è¯•æ‰€æœ‰é…ç½®çš„å¼•æ“

### è½¬ç§»æ—¥å¿—

```
2026-02-11 14:55:50 - DuckDuckGo search successful: 10 results
2026-02-11 14:55:51 - DuckDuckGo search failed: Rate limit
2026-02-11 14:55:52 - Falling back to Bing search
2026-02-11 14:55:53 - Bing search successful: 8 results
```

## API å‚è€ƒ

### web_search

åŸºç¡€æœç´¢ï¼Œè‡ªåŠ¨æ•…éšœè½¬ç§»ï¼ˆDuckDuckGo â†’ Bingï¼‰

```python
web_search(query: str, max_results: int = 10) -> str
```

### web_search_advanced

é«˜çº§æœç´¢ï¼Œæ”¯æŒå¤šå¼•æ“å’Œå¹¶è¡Œæ¨¡å¼

```python
web_search_advanced(
    query: str,
    max_results: int = 10,
    engines: str = "duckduckgo,bing",
    parallel: bool = False,
    use_cache: bool = True
) -> str
```

### web_search_news

æ–°é—»æœç´¢ï¼Œå¤šå¼•æ“æ”¯æŒ

```python
web_search_news(query: str, max_results: int = 10) -> str
```

### clear_search_cache

æ¸…ç©ºæœç´¢ç¼“å­˜

```python
clear_search_cache() -> str
```

### get_search_stats

è·å–ç¼“å­˜å’Œé™æµç»Ÿè®¡

```python
get_search_stats() -> str
```

## æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. ç¼“å­˜ä¼˜åŒ–

- âœ… å¯ç”¨ç¼“å­˜ï¼ˆé»˜è®¤å¼€å¯ï¼‰
- âœ… åˆç†è®¾ç½®TTLï¼ˆæ ¹æ®å†…å®¹æ—¶æ•ˆæ€§ï¼‰
- âœ… å®šæœŸæ¸…ç†è¿‡æœŸç¼“å­˜

### 2. è¯·æ±‚ä¼˜åŒ–

- âœ… é¿å…é‡å¤æŸ¥è¯¢
- âœ… æ‰¹é‡å¤„ç†ç›¸å…³æŸ¥è¯¢
- âœ… ä½¿ç”¨å¹¶è¡Œæœç´¢ï¼ˆé‡è¦æŸ¥è¯¢ï¼‰

### 3. å¼•æ“é€‰æ‹©

- âœ… æ ¹æ®å†…å®¹ç±»å‹é€‰æ‹©å¼•æ“
- âœ… ä¸­æ–‡å†…å®¹ä¼˜å…ˆä½¿ç”¨Baidu
- âœ… æ–°é—»å†…å®¹ä½¿ç”¨newsä¸“ç”¨æ¥å£

## æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: æœç´¢æ— ç»“æœ

**åŸå› **:

- æ‰€æœ‰å¼•æ“éƒ½å¤±è´¥
- ç½‘ç»œè¿æ¥é—®é¢˜
- è§¦å‘é™æµ

**è§£å†³**:

```python
# æ£€æŸ¥é™æµçŠ¶æ€
get_search_stats()

# æ¸…é™¤ç¼“å­˜é‡è¯•
clear_search_cache()
web_search("query")

# å°è¯•ä¸åŒå¼•æ“
web_search_advanced("query", engines="google,baidu")
```

### é—®é¢˜ 2: å“åº”æ…¢

**åŸå› **:

- æœªå¯ç”¨ç¼“å­˜
- å¹¶è¡Œæœç´¢å¼•æ“è¿‡å¤š
- ç½‘ç»œå»¶è¿Ÿ

**è§£å†³**:

```python
# å¯ç”¨ç¼“å­˜
web_search_advanced("query", use_cache=True)

# å‡å°‘å¼•æ“æ•°é‡
web_search_advanced("query", engines="duckduckgo,bing")

# ä½¿ç”¨å¿«é€Ÿå¼•æ“
web_search_advanced("query", engines="duckduckgo")
```

### é—®é¢˜ 3: é¢‘ç¹é™æµ

**åŸå› **:

- è¯·æ±‚è¿‡äºé¢‘ç¹
- ç¼“å­˜æœªç”Ÿæ•ˆ
- TTLè®¾ç½®è¿‡çŸ­

**è§£å†³**:

```python
# å¢åŠ è¯·æ±‚é—´éš”
import time
time.sleep(6)  # ç­‰å¾…6ç§’

# æ£€æŸ¥ç¼“å­˜çŠ¶æ€
stats = get_search_stats()

# ä½¿ç”¨ç¼“å­˜ç»“æœ
web_search_advanced("query", use_cache=True)
```

## è¿ç§»æŒ‡å—

### ä» v1.0 å‡çº§

**v1.0 ä»£ç **:

```python
web_search("query", max_results=10)
```

**v2.0 å…¼å®¹**:

```python
# å®Œå…¨å…¼å®¹ï¼Œæ— éœ€ä¿®æ”¹
web_search("query", max_results=10)
```

**v2.0 æ–°ç‰¹æ€§**:

```python
# ä½¿ç”¨é«˜çº§åŠŸèƒ½
web_search_advanced(
    "query",
    engines="duckduckgo,google",
    parallel=True
)
```

## ä¾èµ–æ›´æ–°

```toml
dependencies = [
    "requests>=2.31.0",
    "beautifulsoup4>=4.12.0",
    "ddgs>=1.0.0",  # æ–°åŒ…å
    "lxml>=5.0.0",
]
```

## æ€»ç»“

### æ ¸å¿ƒæ”¹è¿›

1. **å¯é æ€§**: å¤šå¼•æ“ + æ•…éšœè½¬ç§» â†’ 99.9%å¯ç”¨æ€§
2. **æ€§èƒ½**: æ™ºèƒ½ç¼“å­˜ â†’ å“åº”é€Ÿåº¦æå‡10å€
3. **è¦†ç›–é¢**: å¹¶è¡Œæœç´¢ â†’ ç»“æœæ•°é‡æå‡3å€
4. **ç¨³å®šæ€§**: é™æµä¿æŠ¤ â†’ é¿å…å°ç¦é£é™©

### æ¨èé…ç½®

**æ—¥å¸¸ä½¿ç”¨**:

```python
web_search("query")  # ä½¿ç”¨é»˜è®¤é…ç½®
```

**é‡è¦æŸ¥è¯¢**:

```python
web_search_advanced(
    "important query",
    engines="duckduckgo,google,bing",
    parallel=True,
    max_results=30
)
```

**ä¸­æ–‡æœç´¢**:

```python
web_search_advanced("ä¸­æ–‡æŸ¥è¯¢", engines="baidu,google")
```

## åé¦ˆå’Œæ”¯æŒ

- ğŸ“§ é‚®ç®±: qysyw-team@qq.com
- ğŸ› é—®é¢˜: https://github.com/quyansiyuanwang/oh-my-mcp/issues
- ğŸ“– æ–‡æ¡£: https://github.com/quyansiyuanwang/oh-my-mcp/docs

---

**ç‰ˆæœ¬**: 2.0.0  
**æ›´æ–°æ—¥æœŸ**: 2026-02-11  
**ä½œè€…**: MCP Server Team
